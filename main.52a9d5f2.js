parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"KIzB":[function(require,module,exports) {
"use strict";function e(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=t(e))){var s=0,o=function(){};return{s:o,n:function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,i,l=!0,r=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return l=e.done,e},e:function(e){r=!0,i=e},f:function(){try{l||null==n.return||n.return()}finally{if(r)throw i}}}}function t(e,t){if(e){if("string"==typeof e)return s(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,o=new Array(t);s<t;s++)o[s]=e[s];return o}function o(e,t){for(var s=0;s<t.length;s++){var o=t[s];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function n(e,t,s){return t&&o(e.prototype,t),s&&o(e,s),e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var l="hidden",r="start",a={up:0,right:1,down:2,left:3},u=function e(t,s){i(this,e),this.value=null,this.x=t,this.y=s};function h(e){return Math.floor(Math.random()*(e+1))}var c=function(){function t(){i(this,t),this.gameStarted=!1,this.gameWon=!1,this.gameLose=!1,this.cells=[],this.score=document.querySelector(".game-score"),this.score.textContent=0,this.moveUpPossible=!0,this.moveDownPossible=!0,this.moveLeftPossible=!0,this.moveRightPossible=!0,this.hasEmptyCells=!0;for(var e=0;e<4;e++)for(var s=0;s<4;s++)this.cells.push(new u(s,e))}return n(t,[{key:"getCell",value:function(e,t){return this.cells.find(function(s){return s.x===e&&s.y===t})}},{key:"setUIValue",value:function(e){var t=".field-row:nth-of-type(".concat(e.y+1,")"),s=".".concat("field-cell",":nth-of-type(").concat(e.x+1,")"),o=document.querySelector("".concat(t," > ").concat(s)),n=o.textContent,i=e.value;o.textContent=i;var l=o.classList;l.remove("".concat("field-cell","--").concat(n)),l.add("".concat("field-cell","--").concat(i))}},{key:"insertRandomNumber",value:function(){var e=this.cells.filter(function(e){return null===e.value}),t=e[h(e.length-1)],s=h(10)<10?2:4;t&&(t.value=s,this.setUIValue(t))}},{key:"showCells",value:function(e,t){t.value=null,this.setUIValue(e),this.setUIValue(t)}},{key:"addPoints",value:function(e){this.score.textContent=Number(this.score.textContent)+e,2048===e&&(d.classList.remove(l),this.gameWon=!0)}},{key:"hasNeighbourTheSameValue",value:function(e,t,s){var o=this.getCell(t,s);return o&&o.value===e.value}},{key:"existsEmptyCell",value:function(){return this.cells.filter(function(e){return null===e.value}).length>0}},{key:"isMovePossible",value:function(t){var s,o,n,i=e(this.cells);try{for(i.s();!(n=i.n()).done;){var l=n.value;switch(t){case a.up:s=l.x,o=l.y-1;break;case t.right:s=l.x+1,o=l.y;break;case t.bottom:s=l.x,o=l.y+1;break;default:s=l.x-1,o=l.y}if(this.hasNeighbourTheSameValue(l,s,o))return!0}}catch(r){i.e(r)}finally{i.f()}return!1}},{key:"isNextMovePossible",value:function(){return this.hasEmptyCells=this.existsEmptyCell(),this.moveUpPossible=this.isMovePossible(a.up),this.moveRightPossible=this.isMovePossible(a.right),this.moveDownPossible=this.isMovePossible(a.down),this.moveLeftPossible=this.isMovePossible(a.left),this.hasEmptyCells||this.moveUpPossible||this.moveRightPossible||this.moveDownPossible||this.moveLeftPossible}},{key:"shouldFindNextIndex",value:function(e,t,s,o){return(e===a.up||e===a.left?t>0:t<3)&&null===this.getCell(s,o).value}},{key:"isMerged",value:function(e,t,s,o){var n=this.getCell(e,t);return n.value===s&&o.includes(n)}},{key:"findNextCellIndex",value:function(e,t,s,o){var n;switch(e){case a.up:for(n=s-1;this.shouldFindNextIndex(e,n,t,n);)n--;break;case a.down:for(n=s+1;this.shouldFindNextIndex(e,n,t,n);)n++;break;case a.left:for(n=t-1;this.shouldFindNextIndex(e,n,n,s);)n--;this.isMerged(n,s,o)&&n++;break;default:for(n=t+1;this.shouldFindNextIndex(e,n,n,s);)n++;this.isMerged(n,s,o)&&n--}return n}},{key:"tryMove",value:function(e,t,s,o){var n=this.getCell(t,s),i=n.value;if(null!==i){var l,r,u=this.findNextCellIndex(e,t,s,o);e===a.up||e===a.down?(l=this.getCell(t,u),r=Math.abs(s-u)>1):(l=this.getCell(u,s),r=Math.abs(t-u)>1);var h=l.value;if(null===h)l.value=i,this.showCells(l,n);else if(h===i)l.value+=i,this.addPoints(2*i),this.showCells(l,n),e!==a.left&&e!==a.right||o.push(l);else if(h!==i&&r){switch(e){case a.up:l=this.getCell(t,u+1);break;case a.down:l=this.getCell(t,u-1);break;case a.left:l=this.getCell(u+1,s);break;default:l=this.getCell(u-1,s)}l.value=i,this.showCells(l,n)}}}},{key:"moveUp",value:function(){for(var e=0;e<4;e++)for(var t=1;t<4;t++)this.tryMove(a.up,e,t)}},{key:"moveDown",value:function(){for(var e=0;e<4;e++)for(var t=2;t>=0;t--)this.tryMove(a.down,e,t)}},{key:"moveLeft",value:function(){for(var e=0;e<4;e++)for(var t=[],s=1;s<4;s++)this.tryMove(a.left,s,e,t)}},{key:"moveRight",value:function(){for(var e=0;e<4;e++)for(var t=[],s=2;s>=0;s--)this.tryMove(a.right,s,e,t)}},{key:"reset",value:function(){var e=this;this.cells=this.cells.map(function(t){return t.value=null,e.setUIValue(t),t}),this.hasEmptyCells=!0,this.moveDownPossible=!0,this.moveLeftPossible=!0,this.moveLeftPossible=!0,this.moveUpPossible=!0}}]),t}();function v(){var e=f.classList,t=m.classList;e.contains(r)?(e.remove(r),e.add("restart"),f.textContent="Restart",t.add(l),b.gameStarted=!0):(b.reset(),b.score.textContent=0,b.gameWon?(d.classList.add(l),b.gameWon=!1):b.gameLose&&(b.gameLose=!1,y.classList.add(l))),b.insertRandomNumber(),b.insertRandomNumber()}var f=document.querySelector(".button"),m=document.querySelector(".message-start"),d=document.querySelector(".message-win"),y=document.querySelector(".message-lose"),b=new c;f.addEventListener("click",v),document.addEventListener("keydown",function(e){if(b.gameStarted&&!b.gameWon&&!b.gameLose){switch(e.key){case"ArrowUp":(b.hasEmptyCells||b.moveUpPossible)&&b.moveUp();break;case"ArrowDown":(b.hasEmptyCells||b.moveDownPossible)&&b.moveDown();break;case"ArrowRight":(b.hasEmptyCells||b.moveRightPossible)&&b.moveRight();break;default:(b.hasEmptyCells||b.moveLeftPossible)&&b.moveLeft()}b.insertRandomNumber(),b.isNextMovePossible()||(y.classList.remove(l),b.gameLose=!0)}});
},{}]},{},["KIzB"], null)
//# sourceMappingURL=/2048/main.52a9d5f2.js.map